{% extends '@Cms/Layout/layout.twig' %}

{% set widget_title = 'Version History' | trans %}

{% block head_title widget_title %}
{% block section_title widget_title %}

{% block action %}

    {% set redirectUrl = url('/cms-gui/version-page/history', {'id-cms-page' : cmsCurrentPage.fkPage }) %}
    {{ backActionButton('/cms-gui/list-page', 'Back to CMS' | trans) }}
{% endblock %}

{% block content %}
    <div id="version-diff" class="row">
        <div class="col-lg-6 current-version">
            {% embed '@Gui/Partials/widget.twig' with { widget_title: 'Current Version' }  %}
                {% block widget_content %}
                    <div class="current-version-box">
                            Page Version is <b>{{ cmsVersion.version }}</b> and it has published on <b>{{ cmsVersion.createdAt|date }}</b>
                            {% if cmsVersion.firstName is not null %}
                                by <b>{{ cmsVersion.firstName ~ ' ' ~ cmsVersion.lastName }}</b>
                            {% endif %}
                    </div>
                {% endblock %}
            {% endembed %}

            {{ include ('@CmsGui/_template/version-history.twig', {'cmsPage' : cmsCurrentPage, 'cmsGlossary' : cmsCurrentGlossary , 'prettyDiffClass' : 'original', 'versionDiffClass' : 'original'}) }}
        </div>
        <div class="col-lg-6">
            {% embed '@Gui/Partials/widget.twig' with { widget_title: 'Selected Version' }  %}
                {% block widget_content %}
                    {{ form_start(versionForm) }}
                    <div class="row">
                        <div class="col-lg-12 text-right">
                            <input type="submit" id="submit-cms" class="btn btn-sm btn-outline btn-view" value="{{ 'Rollback to Selected Version' | trans }}" name="rollback"/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-10">
                            <p>
                                {{ form_widget(versionForm.version) }}
                            </p>
                        </div>
                        <div class="col-lg-2 text-right">
                            <input type="submit" id="submit-cms" class="btn btn-sm btn-outline btn-edit" value="{{ 'Compare' | trans }}" name="compare" />
                        </div>
                    </div>
                    {{ form_end(versionForm) }}
                {% endblock %}
            {% endembed %}

            {% if (cmsTargetPage is not null) %}
                {{ include ('@CmsGui/_template/version-history.twig', {'cmsPage' : cmsTargetPage, 'cmsGlossary' : cmsTargetGlossary, 'prettyDiffClass' : 'changed diff', 'versionDiffClass' : 'diff'}) }}
            {% endif %}
        </div>
    </div>
{% endblock %}

{% block footer_js %}
    {{ parent() }}
    <script src="/assets/js/spryker-zed-cms-gui-main.js"></script>
{% endblock %}


{% block head_css %}
    {{ parent() }}
    <link rel="stylesheet" href="/assets/css/spryker-zed-cms-gui-main.css">
{% endblock %}


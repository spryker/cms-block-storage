{{ form_errors(generalForm) }}

{{ form_start(generalForm, { attr: { id:'product_option_general'}}) }}
 <div class="form-group">
    {{ 'Create a product option by defining option values with translation key, sku and price. By adding more than 1 option value bellow, you will create an option group. With an option group your customer can choose one option from this group.' | trans }}

 </div>

{% set readOnly = {} %}
{% if generalForm.vars.data and generalForm.vars.data.name and generalForm.vars.data.idProductOptionGroup %}
    {% set readOnly = {'readonly' : 'readonly'} %}
{% endif %}

{{ form_row(generalForm.name, {attr:readOnly}) }}

{{ form_row(generalForm.fkTaxSet) }}

<br />

<h4>{{ 'Option Values' | trans }}</h4>

<div class="form-group">
    <div id="option-value-list"
         class="option-value-list"
         data-value-count="{{ generalForm.productOptionValues|length  }}"
         data-prototype="
           {% filter escape %}
              {{ include ('@ProductOption/_template/_product-option-template.twig', { 'productOptionForm': generalForm.productOptionValues.vars.prototype }) }}
           {% endfilter %}">

        {% for valueForm in generalForm.productOptionValues %}
            {{ include ('@ProductOption/_template/_product-option-template.twig', { 'productOptionForm': valueForm }) }}
        {% endfor %}

        {% do generalForm.productOptionValues.setRendered %}
    </div>
</div>

<div class="form-group">
    <a href="#" class="btn btn-sm btn-outline btn-primary" id="add-another-option">{{ 'Add option' | trans }}</a>
</div>

<br /><br />

<h4>{{ 'Translation' | trans }}</h4>

<div class="tabPane row">
    <div class="tabs-container translation-tabs" id="option-value-translations"
         data-value-count="{{ generalForm.productOptionValueTranslations|length  }}"
         data-prototype="
           {% filter escape %}
               {{ include ('@ProductOption/_template/_product-option-translation-template.twig', { 'productOptionTranslationForm': generalForm.productOptionValueTranslations.vars.prototype, 'label' : 'Option name:' }) }}
           {% endfilter %}">
        <div class="tabs-left">
            <ul class="nav nav-tabs">
                {% for locale in availableLocales %}
                    <li {{ loop.first ? 'class="active"'  : '' }}>
                        <a data-toggle="tab" class="tab-item" href="#tab-{{ locale.localeName }}">{{ locale.localeName }}</a>
                    </li>
                {% endfor %}
            </ul>
            <div class="tab-content">
                {% for locale in availableLocales %}
                <div id="tab-{{ locale.localeName }}" class="tab-pane {{ loop.first ? 'active'  : '' }}">
                    <div class="panel-body" data-locale-code="{{ locale.localeName }}">

                        {% for productGroupNameTranslationForm in generalForm.groupNameTranslations %}
                            {% if productGroupNameTranslationForm.vars.data.localeCode == locale.localeName  %}
                                {{ include ('@ProductOption/_template/_product-option-translation-template.twig', { 'productOptionTranslationForm': productGroupNameTranslationForm, 'label' : 'Group name:'}) }}
                            {% endif %}
                        {% endfor %}

                        {% for valueTranslationForm in generalForm.productOptionValueTranslations %}
                            {% if valueTranslationForm.vars.data.localeCode == locale.localeName  %}
                                {{ include ('@ProductOption/_template/_product-option-translation-template.twig', { 'productOptionTranslationForm': valueTranslationForm, 'label' : 'Option name:' }) }}
                            {% endif %}
                        {% endfor %}

                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% do generalForm.productOptionValueTranslations.setRendered %}
{% do generalForm.groupNameTranslations.setRendered %}

{{ form_end(generalForm) }}

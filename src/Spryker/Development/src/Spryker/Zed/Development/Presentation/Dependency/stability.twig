{% extends '@Application/Layout/layout.twig' %}

{% block content %}

    {% embed '@Gui/Partials/widget.twig' with { widget_title: 'Stability of all core bundles' } %}
        {% block widget_content %}
            <div class="spy-layout sparse">
                <p>
                    Stability is calculated by "incoming dependencies / ( incoming dependencies + outgoing dependencies )" the result will be between 0 (stable) and 1 (unstable)
                </p>
                <table class="table table-striped spy-grid">
                    <tr>
                        <th>Bundle</th>
                        <th>Incoming</th>
                        <th>Outgoing</th>
                        <th>Stability</th>
                        <th>Indirect Incoming</th>
                        <th>Indirect Outgoing</th>
                        <th>Indirect Stability</th>
                        <th>Spryker Stability</th>
                    </tr>
                    {% for bundle, info in bundles %}

                        <tr>
                            <td>
                                <a {% if info.stability > 0.4 and info.stability < 0.6 and info.in | length > 2 and info.out | length > 2 %}style="color: red"{% endif %} href="/development/dependency/outgoing-graph?bundle={{ bundle }}" target="_blank">{{ bundle }}</a>
                            </td>
                            <td>{{ info.in | length }}</td>
                            <td>{{ info.out | length }}</td>
                            <td>{{ info.stability }}</td>
                            <td>{{ info.indirectIn | length }}</td>
                            <td>{{ info.indirectOut | length }}</td>
                            <td>{{ info.indirectStability }}</td>
                            <td>{{ info.sprykerStability }}</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        {% endblock %}
    {% endembed %}

{% endblock %}

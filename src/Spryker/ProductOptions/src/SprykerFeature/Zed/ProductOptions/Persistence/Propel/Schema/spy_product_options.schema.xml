<?xml version="1.0"?>
<database name="zed"
          defaultIdMethod="native"
          defaultPhpNamingMethod="underscore"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://xsd.propelorm.org/1.6/database.xsd"
          namespace="SprykerFeature\Zed\ProductOptions\Persistence\Propel"
          package="vendor.spryker.spryker.Bundles.ProductOptions.src.SprykerFeature.Zed.ProductOptions.Persistence.Propel">

    <table name="spy_option_type" idMethod="native" allowPkInsert="true" phpName="SpyOptionType">
        <column name="id_option_type" type="INTEGER" primaryKey="true" autoIncrement="true" />
    </table>

    <table name="spy_option_value" idMethod="native" allowPkInsert="true" phpName="SpyOptionValue">
        <column name="id_option_value" type="INTEGER" primaryKey="true" autoIncrement="true" />

        <column name="fk_option_type" type="INTEGER" required="true" />
        <column name="fk_option_value_price" type="INTEGER" required="false" />
        <column name="fk_tax_set" type="INTEGER" required="false" />

        <foreign-key foreignTable="spy_option_type" onDelete="CASCADE">
            <reference local="fk_option_type" foreign="id_option_type" />
        </foreign-key>
        <foreign-key foreignTable="spy_option_value_price">
            <reference local="fk_option_value_price" foreign="id_option_value_price" />
        </foreign-key>
        <foreign-key foreignTable="spy_tax_set">
            <reference local="fk_tax_set" foreign="id_tax_set" />
        </foreign-key>
    </table>

    <table name="spy_option_value_price" idMethod="native" allowPkInsert="true" phpName="SpyOptionValuePrice">
        <column name="id_option_value_price" type="INTEGER" primaryKey="true" autoIncrement="true" />
        <column name="price" required="true" type="INTEGER" />
    </table>

    <table name="spy_option_value_translation" idMethod="native" allowPkInsert="true" phpName="SpyOptionValueTranslation">
        <column name="name" required="true" type="VARCHAR" />

        <column name="fk_option_value" type="INTEGER" primaryKey="true" />
        <column name="fk_locale" type="INTEGER" primaryKey="true" />

        <foreign-key foreignTable="spy_option_value" onDelete="CASCADE">
            <reference local="fk_option_value" foreign="id_option_value" />
        </foreign-key>
        <foreign-key foreignTable="spy_locale">
            <reference local="fk_locale" foreign="id_locale" />
        </foreign-key>
    </table>

    <table name="spy_option_type_translation" idMethod="native" allowPkInsert="true" phpName="SpyOptionTypeTranslation">
        <column name="name" required="true" type="VARCHAR" />

        <column name="fk_option_type" type="INTEGER" primaryKey="true" />
        <column name="fk_locale" type="INTEGER" primaryKey="true" />

        <foreign-key foreignTable="spy_option_type">
            <reference local="fk_option_type" foreign="id_option_type" onDelete="CASCADE" />
        </foreign-key>
        <foreign-key foreignTable="spy_locale">
            <reference local="fk_locale" foreign="id_locale" />
        </foreign-key>
    </table>

    <table name="spy_product_option" idMethod="native" allowPkInsert="true" phpName="SpyProductOption">
        <column name="id_product_option" type="INTEGER" primaryKey="true" autoIncrement="true" />
        <column name="sequence" type="INTEGER" required="true" />

        <column name="fk_product" type="INTEGER" required="true" />
        <column name="fk_option_value" type="INTEGER" required="true" />

        <foreign-key foreignTable="spy_product" onDelete="CASCADE">
            <reference local="fk_product" foreign="id_product" />
        </foreign-key>
        <foreign-key foreignTable="spy_option_value">
            <reference local="fk_option_value" foreign="id_option_value" />
        </foreign-key>

    </table>

    <table name="spy_product_option_constraint" idMethod="native" allowPkInsert="true" phpName="SpyProductOptionConstraint">
        <column name="operator" type="VARCHAR" size="255" required="true" />

        <column name="fk_product_option_a" type="INTEGER" primaryKey="true" />
        <column name="fk_product_option_b" type="INTEGER" primaryKey="true" />

        <foreign-key foreignTable="spy_product_option">
            <reference local="fk_product_option_a" foreign="id_product_option" onDelete="CASCADE" />
        </foreign-key>
        <foreign-key foreignTable="spy_product_option">
            <reference local="fk_product_option_b" foreign="id_product_option" onDelete="CASCADE" />
        </foreign-key>
    </table>

    <table name="spy_option_type_exclusion" idMethod="native" allowPkInsert="true" phpName="SpyOptionTypeExclusion">
        <column name="fk_product_option" type="INTEGER" primaryKey="true" />
        <column name="fk_option_type" type="INTEGER" primaryKey="true" />

        <foreign-key foreignTable="spy_product_option" onDelete="CASCADE">
            <reference local="fk_product_option" foreign="id_product_option" />
        </foreign-key>
        <foreign-key foreignTable="spy_option_type">
            <reference local="fk_option_type" foreign="id_option_type" />
        </foreign-key>
    </table>

    <table name="spy_default_configuration" idMethod="native" allowPkInsert="true" phpName="SpyDefaultConfiguration">
        <column name="id_default_configuration" type="INTEGER" primaryKey="true" />
        <column name="fk_product" type="INTEGER" required="true" />

        <foreign-key foreignTable="spy_product" onDelete="CASCADE">
            <reference local="fk_product" foreign="id_product" />
        </foreign-key>
    </table>

    <table name="spy_default_configuration_option" idMethod="native" allowPkInsert="true" phpName="SpyDefaultConfigurationOption">
        <column name="fk_default_configuration" type="INTEGER" primaryKey="true" />
        <column name="fk_product_option" type="INTEGER" primaryKey="true" />

        <foreign-key foreignTable="spy_default_configuration" onDelete="CASCADE">
            <reference local="fk_default_configuration" foreign="id_default_configuration" />
        </foreign-key>
        <foreign-key foreignTable="spy_product_option" onDelete="CASCADE">
            <reference local="fk_product_option" foreign="id_product_option" />
        </foreign-key>
    </table>

</database>
